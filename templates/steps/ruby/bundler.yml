name: bundler
description: "Install Ruby dependencies using Bundler"
category: ruby
version: "1.0.0"
platforms: [macos, linux, windows]

detects:
  - file: Gemfile

step:
  title: "Install Ruby dependencies"
  description: "Install gems from Gemfile using Bundler"
  command: "bundle install"
  requires:
    - ruby
  completed_check:
    type: command_succeeds
    command: "bundle check"
  watches:
    - Gemfile
    - Gemfile.lock

# If your project has BUNDLE_CLEAN: "true" in .bundle/config and you
# use a version manager (mise, asdf, rbenv), set BUNDLE_PATH to avoid
# "Cleaning all the gems on your system is dangerous!" errors:
#
#   steps:
#     bundler:
#       template: bundler
#       env:
#         BUNDLE_PATH: vendor/bundle

environment_impact:
  path_additions:
    - "./vendor/bundle/bin"
  note: "Gems are installed to the configured bundle path"
